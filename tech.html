<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
  table.main{
    background-image: url("iphone.png");
    background-repeat:no-repeat;
    background-size: 300px 600px;
    padding-left: 15px;
    }
  table, th, td {
     border: 1px solid black;
  }

  </style>

<!-- Dragdrop script -->  
<script>
	var serventArray = new Array();
	//var skillMap = {};
	function allowDrop(ev) {
	    ev.preventDefault();
	}
	
	function drag(ev) {
	    ev.dataTransfer.setData("text", ev.target.id);
	   	//document.getElementById(ev.target.id).style.backgroundImage="url('iphoneicon.jpeg')";
	}
	
	function drop(ev) {
	    ev.preventDefault();
	    var data = ev.dataTransfer.getData("text");
	    ev.target.appendChild(document.getElementById("drag1"));
	    
	    
	    if(ev.target.id == "room1drop") {
	    	var servent = {serventName:"Servent1", skill1:"", skill2:"", skill3:"", skill4:"", skill5:""};
	    	serventArray[serventArray.length] = servent;	    	    	
	    	var divElemt = document.getElementById("servantList1");
			var button = document.createElement("button");
	 		button.setAttribute("type", "button");
	 		button.setAttribute("value", servent.serventName);
	 		button.setAttribute("onclick", "showSkill(1)");
	 		button.innerHTML = servent.serventName;
			divElemt.appendChild(button);	    	
	    } else if(ev.target.id == "room2drop") {
	    	var servent = {serventName:"Servent2", skill1:"", skill2:"", skill3:"", skill4:"", skill5:""};
	    	serventArray[serventArray.length] = servent;	    	    	
	    	var divElemt = document.getElementById("servantList1");
			var button = document.createElement("button");
	 		button.setAttribute("type", "button");
	 		button.setAttribute("value", servent.serventName);
	 		button.setAttribute("onclick", "showSkill(1)");
	 		button.innerHTML = servent.serventName;
			divElemt.appendChild(button);	    	
	    } else if(ev.target.id == "room3drop") {
	    	var servent = {serventName:"Servent3", skill1:"", skill2:"", skill3:"", skill4:"", skill5:""};
	    	serventArray[serventArray.length] = servent;	    	    	
	    	var divElemt = document.getElementById("servantList1");
			var button = document.createElement("button");
	 		button.setAttribute("type", "button");
	 		button.setAttribute("value", servent.serventName);
	 		button.setAttribute("onclick", "showSkill(1)");
	 		button.innerHTML = servent.serventName;
			divElemt.appendChild(button);	    	
	    } else if(ev.target.id == "room4drop") {
	    	var servent = {serventName:"Servent4", skill1:"", skill2:"", skill3:"", skill4:"", skill5:""};
	    	serventArray[serventArray.length] = servent;	    	    	
	    	var divElemt = document.getElementById("servantList1");
			var button = document.createElement("button");
	 		button.setAttribute("type", "button");
	 		button.setAttribute("value", servent.serventName);
	 		button.setAttribute("onclick", "showSkill(1)");
	 		button.innerHTML = servent.serventName;
			divElemt.appendChild(button);	    	
	    }
	    
	}
	
	function onLoad() {
		/*
	    	var servent = {serventName:"Servent1", skill1:"", skill2:"", skill3:"", skill4:"", skill5:""};
	    	serventArray[serventArray.length] = servent;	    	    	
	    	var divElemt = document.getElementById("servantList1");
			var button = document.createElement("button");
	 		button.setAttribute("type", "button");
	 		button.setAttribute("value", servent.serventName);
	 		button.setAttribute("onclick", "showSkill(1)");
	 		button.innerHTML = servent.serventName;
			divElemt.appendChild(button);	    	
		
		*/
    	
	}
</script>  
  
  <script type="text/javascript">
  var exist =["false", "false", "false", "false", "false"];
  function showSkill(skillValue){
    var table=document.getElementById("servants");
    var innerTable=document.createElement("table");
    var tr=document.createElement("tr");
    var td=document.createElement("td");
    var btn=document.createElement("button");
    btn.type="button";
    var btn1=document.createElement("button");
    btn1.type="button";
    var btn2=document.createElement("button");
    btn2.type="button";

    if(skillValue==1 && exist[0]=="false"){
      var txt =document.createTextNode("Heart Rate");
      innerTable.id='Vitals';

      btn.appendChild(txt);
      btn.style.padding = "0px";
      btn.id="HrtRt";
      btn.setAttribute('onclick', "buttonFunction('Vitals',this.id, 'W','G');");

      txt=document.createTextNode("Blood pressure");
      btn1.appendChild(txt);
      btn1.style.padding = "0px";
      btn1.style.margin = "0px 5px";
      btn1.id="BloodPressure";
      btn1.setAttribute('onclick', "buttonFunction('Vitals',this.id,'W','G');");


      txt=document.createTextNode("Temperature");
      btn2.appendChild(txt);
      btn2.style.padding = "0px";
      btn2.id="Temperature";
      btn2.setAttribute('onclick', "buttonFunction('Vitals',this.id,'W','G');");


      td.appendChild(btn);
      td.appendChild(btn1);
      td.appendChild(btn2);
      tr.appendChild(td);
      innerTable.appendChild(tr);
      table.appendChild(innerTable);
      exist[0]="true";
    }
    else if(skillValue==2 && exist[1]=="false"){
      var txt =document.createTextNode("Infusion Pump");
      innerTable.id="Medication";

      btn.appendChild(txt);
      btn.id="Inf";
      btn.setAttribute('onclick', "buttonFunction('Medication',this.id,W,S)");

      txt=document.createTextNode("Blood Glucose");
      btn1.appendChild(txt);
      btn1.style.margin = "0px 5px";
      btn1.id="Gul";
      btn1.setAttribute('onclick', "buttonFunction('Medication',this.id,W,S);");

      td.appendChild(btn);
      td.appendChild(btn1);
      tr.appendChild(td);
      innerTable.appendChild(tr);
      table.appendChild(innerTable);
      exist[1]="true";
    }
    else if(skillValue==3 && exist[2]=="false"){
      innerTable.id="Imaging";
      var txt =document.createTextNode("CT Scan");
      btn.appendChild(txt);
      btn.id="Ct";
      btn.setAttribute('onclick', "buttonFunction('Imaging',this.id,'W','G');");

      txt=document.createTextNode("ECG");
      btn1.appendChild(txt);
      btn1.style.margin = "0px 5px";
      btn1.id="Ecg";
      btn1.setAttribute('onclick', "buttonFunction('Imaging',this.id,'W','G');");

      td.appendChild(btn);
      td.appendChild(btn1);
      tr.appendChild(td);
      innerTable.appendChild(tr);
      table.appendChild(innerTable);
      exist[2]="true";
    }
    else if(skillValue==4 && exist[3]=="false"){
      innerTable.id="EHR";
      var txt =document.createTextNode("Last Chart");
      btn.appendChild(txt);
      btn.id="lastChart";
      btn.setAttribute('onclick', "buttonFunction('EHR',this.id,'W','G');");

      txt=document.createTextNode("Save Chart");
      btn1.appendChild(txt);
      btn1.style.margin = "0px 5px";
      btn1.id="saveChart";
      btn1.setAttribute('onclick', "buttonFunction('EHR',this.id,'W','G');");

      td.appendChild(btn);
      td.appendChild(btn1);
      tr.appendChild(td);
      innerTable.appendChild(tr);
      table.appendChild(innerTable);
      exist[3] = "true";
    }
    else{

    }
  }

   var contentArray = [];
   var contentResponse = [];


  function buttonFunction(servant, skill, activityType, getSet){
     var planPOS =0;
    if(getSet =='G'){
      if(activityType=='W'){

          contentArray[contentArray.length] = {activityTable: servant, activityName: skill, color1: "Yellow", col3:"true", state: "WAIT"};
        for(i=0;i<=contentArray.length-1;i++){
          var row = contentArray[i];
          if(row.state == "DONE")
          continue;
          else {
            planPOS = i;
          }

          screenContent(1,planPOS);
          row.state = "DONE";
        }


      }
    }
  }
  async function screenContent(side,planposition){

    var tr = document.createElement("tr");
    var td = document.createElement("td");
    var td1 = document.createElement("td");
    var td2 = document.createElement("td");

    if(side == 1){
    var table = document.getElementById(contentArray[planposition].activityTable);

    var txt = document.createTextNode(contentArray[planposition].activityName);
    td.style.textAlign = "right";
    td.appendChild(txt);

    tr.appendChild(td);
    table.appendChild(tr);

    if(contentArray[planposition].activityName == "HrtRt"){
      contentResponse[contentResponse.length] = {activityTable: contentArray[planposition].activityTable ,activityName: 'HrtRt: 90bpm' };
    }
    else if(contentArray[planposition].activityName == "BloodPressure"){
      contentResponse[contentResponse.length] = {activityTable: contentArray[planposition].activityTable ,activityName: 'BP: 120/80' };
    }
    else if(contentArray[planposition].activityName == "Temperature"){
      contentResponse[contentResponse.length] = {activityTable: contentArray[planposition].activityTable ,activityName: 'Temp: 98.3ยบ F/ 36.8ยบ C' };
    }
    

    await sleep(3000);
    screenContent(2, planposition);

    }
    if(side==2){
      var table = document.getElementById(contentResponse[planposition].activityTable);
      var txt= document.createTextNode(contentResponse[planposition].activityName);
      td.appendChild(txt);
      tr.appendChild(td);
      table.appendChild(tr);
    }
  }
  function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
  </script>
</head>
<body onload="onLoad()">
	<table style="width:100%; height:600px;">
		<tr>
			<td width="33%">
				  	
				  <table id="doc1Table" draggable="true" ondragstart="drag(event)" class="main" style="width:300px; height:600px;"  >
				    <tr valign="top">
				      	<td >
				      		<div id="servantList1" style="margin:40px 0px 10px 0px;">
				      		&nbsp Patient Name: Alan <br/>
				      		<img src="line.png" alt="" width="95%" /><br />
				        	&nbsp Select Servant<br/><br>
				        	&nbsp   
				        	<!-- 				        	
				        	<button type="button" value="Vitals" onclick="showSkill(1)">Vitals</button>
				        	<button type="button" value="Medication" onclick="showSkill(2)">Medication</button>
				        	<button type="button" value="Imaging" onclick="showSkill(3)">Imaging</button>
				        	<button type="button" value="EHR" onclick="showSkill(4)">EHR</button>
				        	 -->
				        	
				      		</div>
				      		<img src="line.png" alt="" width="95%"/>
				      		<table id="servants">
				
				      		</table>
				    	</td>
				    </tr>
				  </table>			
			</td>
			<td width="33%">
				<table id="erRoomTable" style="width:100%; height:100%;">
					<tr>
						<td width="33%">Servent 1</td>
						<td width="33%"><div id="room1drop" ondrop="drop(event)" ondragover="allowDrop(event)" style="height:50px; width:50px; background:#FFFAFA"></div></td>
						<td width="33%"></td>						
					</tr>
					<tr>
						<td width="33%"></td>
						<td width="33%"><div id="room2drop" ondrop="drop(event)" ondragover="allowDrop(event)" style="height:50px; width:50px; background:#FFFAFA"></div></td>
						<td width="33%"></td>						
					</tr>
					<tr>
						<td width="33%"></td>
						<td width="33%"><div id="room3drop" ondrop="drop(event)" ondragover="allowDrop(event)" style="height:50px; width:50px; background:#FFFAFA"></div></td>
						<td width="33%"></td>						
					</tr>
					<tr>
						<td width="33%"></td>
						<td width="33%"><div id="room4drop" ondrop="drop(event)" ondragover="allowDrop(event)" style="height:50px; width:50px; background:#FFFAFA"></div></td>
						<td width="33%"></td>						
					</tr>								
				</table>
			</td>
			<td width="33%">
				  <table id="doc2Table" class="main" style="width:300px; height:600px;" >
				    <tr valign="top">
				      	<td >
				      		<div id="servantList1" style="margin:40px 0px 10px 0px;">
				      		&nbsp Patient Name: Alan <br/>
				      		<img src="line.png" alt="" width="95%" /><br />
				        	&nbsp Select Servant<br/><br>
				        	&nbsp   
				        	<!-- 
				        	<button type="button" value="Vitals" onclick="showSkill(1)">Vitals</button>
				        	<button type="button" value="Medication" onclick="showSkill(2)">Medication</button>
				        	<button type="button" value="Imaging" onclick="showSkill(3)">Imaging</button>
				        	<button type="button" value="EHR" onclick="showSkill(4)">EHR</button>
				        	-->
				        	<img src="line.png" alt="" width="95%" >
				        	 
				      		</div>
				      		
				      		<table id="servants">
				
				      		</table>
				    	</td>
				    </tr>
				  </table>			
			
			</td>
		</tr>			
	</table>		  
	<img id="drag1" src="iphoneicon.jpg" draggable="true" ondragstart="drag(event)" width="64" height="64">
</body>
</html>
